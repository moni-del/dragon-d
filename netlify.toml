[build]
  publish = "dist"
  command = "npm run build"

[build.environment]
  VITE_DISCORD_CLIENT_ID = "1470099721900265704"
  VITE_API_BASE_URL = "https://dtdt-f871e.web.app"
  VITE_DISCORD_REDIRECT_URI = "https://dtdt-f871e.web.app/?callback=true"
  CLIENT_URL = "https://dtdt-f871e.web.app"

[[redirects]]
  from = "/api/status"
  to = "/api/status.json"
  status = 200

[[redirects]]
  from = "/api/auth/discord/callback"
  to = "/api/auth/discord/callback.json"
  status = 200

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[[headers]]
  for = "/api/**/*.json"
  [headers.values]
    Content-Type = "application/json"
    Access-Control-Allow-Origin = "*"
